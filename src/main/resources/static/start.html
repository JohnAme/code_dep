<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Requirements' Traceable Query Tool</title>

    <link href="lib/css/bootstrap.css" rel="stylesheet"/>
    <link href="lib/css/bootstrap-table.css" rel="stylesheet"/>
    <link href="assets/css/docs.css" rel="stylesheet"/>
    <link href="assets/css/index.css" rel="stylesheet"/>
    <link href="assets/css/product.css" rel="stylesheet"/>
    <link href="assets/css/grid-framework.less" rel="stylesheet/less" type="text/css"/>
    <link href="lib/css/bootstrap-treeview.min.css" rel="stylesheet">
</head>
<body>
<div class="navbar navbar-static-top bs-docs-nav">
    <div class="container">
        <div class="navbar-header">
            <a href="index" class="navbar-brand">Requirements Tracing</a>
        </div>
        <nav id="bs-navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li>
                    <a href="start">start</a>
                </li>
                <li><a href="project">project</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <!-- <li><a href="http://mb.bootcss.com" onclick="_hmt.push(['_trackEvent', 'docv3-navbar', 'click', 'themes'])" target="_blank">主题/模板</a></li> -->
                <li><a id="nav_login" href="#" data-toggle="modal" data-target="#login">login</a></li>
                <li><a id="nav_register" href="#" data-toggle="modal" data-target="#register">register</a></li>
            </ul>
        </nav>
    </div>
</div>

<div class="bs-docs-header" id="content" tabindex="-1">
    <div class="container">
        <h1>Start</h1>
        <p id="description1">try to trace your requirements</p>
    </div>
</div>


<div class="container">
    <div class="row">
        <!--<div class="col-md-1 side-bar">-->
            <!--<button class="list-group-item btn-primary" onclick="selectFile()">file</button>-->
            <!--<input type="file" onchange="check()" id="file" style="display: none">-->
        <!--</div>-->
        <div class="col-md-4 middle-area">
            <div class="text-select">
                <button class="list-group-item btn-primary" onclick="selectFile()">upload file</button>
                <form enctype="multipart/form-data" id="fileform">
                    <input type="file" onchange="check();" id="file" style="display: none" name="file" >
                </form>
                <!--<select>-->
                    <!--<option value="a">Volvo</option>-->
                    <!--<option value="b">Saab</option>--
                    <!--<option value="c">Opel</option>-->
                    <!--<option value="d">Audi</option>-->
                <!--</select>-->
            </div>
            <p id="box">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. A ad architecto consequatur corporis cumque
            dignissimos esse expedita fugit, harum hic illo maiores molestiae officiis porro suscipit veritatis vitae!
            Consequuntur, repudiandae.
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. A ad architecto consequatur corporis cumque
            dignissimos esse expedita fugit, harum hic illo maiores molestiae officiis porro suscipit veritatis vitae!
            Consequuntur, repudiandae.
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. A ad architecto consequatur corporis cumque
            dignissimos esse expedita fugit, harum hic illo maiores molestiae officiis porro suscipit veritatis vitae!
            Consequuntur, repudiandae.
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. A ad architecto consequatur corporis cumque
            dignissimos esse expedita fugit, harum hic illo maiores molestiae officiis porro suscipit veritatis vitae!
            Consequuntur, repudiandae.
            </p>
            <div id="toolbar">
                <button id="submit-button" class="btn btn-success">
                    <i class="glyphicon glyphicon-chevron-right"></i> Search
                </button>
            </div>
        </div>
        <div class="col-md-5 middle-area">
            <div class="text-select">
                <select>
                    <option value="a">Vector Space Model</option>
                    <option value="b">Latent Semantic Indexing</option>
                    <option value="c">Jensen and Shannon</option>
                </select>
            </div>
            <table id="sth">
            </table>
            <div id="searchForm">
                <form action="" method="get">
                    Project Url: <input id="downloadUrl" type="text" name="projectUrl" size="40" />
                    <input id="downloadSubmit" class="btn-primary" type="submit" value="提交" />
                </form>
            </div>
        </div>
        <div class="col-md-3">
            <div id="tree">

            </div>
        </div>
    </div>
</div>

<!--用户反馈-->
<div class="modal fade" id="verify" tabindex="-1" role="dialog" aria-labelledby="verifyLabel" aria-hidden="true" data-backdrop="false">
    <div class="modal-dialog" style="width:400px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="verifyLabel">
                    User Verify
                </h4>
            </div>
            <div class="modal-body">
                <form class="form-group" action="">
                    <label id="verifyClass">class : EditHealth</label> <br>
                    <input type="radio" name="radioVerify" class="radio-inline" value="Relevant"> Relevant <br />
                    <input type="radio" name="radioVerify" class="radio-inline" value="Irrelevant"> Irrelevant <br />
                    <input type="radio" name="radioVerify" class="radio-inline" value="Skip"> Skip <br />
                    <input type="radio" name="radioVerify" class="radio-inline" value="Stop"> Stop <br />
                    <div class="text-right">
                        <button type="submit" class="btn btn-primary" onclick="submitVerify()">Confirm</button>
                        <button type="button" class="btn btn-default">Help</button>
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>


<!--注册-->
<div class="modal fade" id="register_modal" tabindex="-1" role="dialog" aria-labelledby="registerLabel" aria-hidden="true" data-backdrop="false">
    <div class="modal-dialog" style="width:400px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="registerLabel">
                    Register
                </h4>
            </div>
            <div class="modal-body">
                <form class="form-group" action="">
                    <div class="form-group">
                        <label for="">Username</label>
                        <input class="form-control" type="text" placeholder="6-15位字母或数字">
                    </div>
                    <div class="form-group">
                        <label for="">Password</label>
                        <input class="form-control" type="password" placeholder="至少6位字母或数字">
                    </div>
                    <div class="form-group">
                        <label for="">Password Again</label>
                        <input class="form-control" type="password" placeholder="至少6位字母或数字">
                    </div>
                    <div class="text-right">
                        <button id="registerSubmit" class="btn btn-primary modal-submit" type="submit">提交</button>
                        <button class="btn btn-default" data-dismiss="modal">取消</button>
                    </div>
                    <a id="jump2login" href="" data-toggle="modal" data-dismiss="modal" data-target="#login_modal">已有账号？点我登录</a>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

<!--登陆-->
<div class="modal fade" id="login_modal" tabindex="-1" role="dialog" aria-labelledby="loginLabel" aria-hidden="true" data-backdrop="false">
    <div class="modal-dialog" style="width:400px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="loginLabel">
                    Login
                </h4>
            </div>
            <div class="modal-body">
                <form class="form-group" action="">
                    <div class="form-group">
                        <label for="">Username</label>
                        <input id="loginUsername" class="form-control" type="text" placeholder="6-15位字母或数字">
                    </div>
                    <div class="form-group">
                        <label for="">Password</label>
                        <input id="loginPassword" class="form-control" type="password" placeholder="至少6位字母或数字">
                    </div>
                    <div class="text-right">
                        <button id="loginSubmit" class="btn btn-primary modal-submit" type="submit">登陆</button>
                        <button class="btn btn-default" data-dismiss="modal">取消</button>
                    </div>
                    <a id="jump2register" href="" data-toggle="modal" data-dismiss="modal" data-target="#register_modal">没有账号？点我注册</a>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
</body>
<script src="assets/js/jquery-1.10.2.js" type="text/javascript"></script>
<script src="assets/js/jquery-ui-1.10.4.custom.min.js" type="text/javascript"></script>
<script src="lib/js/bootstrap.js" type="text/javascript"></script>
<script src="lib/js/bootstrap-table.js" type="text/javascript"></script>
<script src="lib/js/bootstrap-table-zh-CN.js" type="text/javascript"></script>
<script src="assets/js/validator.js" type="text/javascript"></script>
<script src="lib/js/bootstrap-treeview.min.js" type="text/javascript"></script>
<script src="assets/js/index.js" type="text/javascript"></script>
<script src="assets/js/file.js" type="text/javascript"></script>
<script src="assets/js/treeview.js" type="text/javascript"></script>

<script type="text/javascript">
    function check() {
        var file=($("#file"))[0].files[0];
        var formdata=false;
        if(window.FormData){
            formdata=new FormData;
        }
        formdata.append("file",file);

        $.ajax({
            url: "/trace/upload",
            type: "POST",
            data: formdata,
            cache: false,
            contentType: false,
            processData: false,
            success: function(data){
                alert(data);
            }
        });
    }

    $(function(){
        function showCandidateList(pid) {
            $.get("/trace/getCandidateList?pid="+encodeURIComponent(pid),
                function (data) {
                    $("#sth").bootstrapTable({
                        columns: [{
                            field: "class",
                            title: 'class',
                        }, {
                            field: 'score',
                            title: 'score'
                        }, {
                            field: 'effect',
                            title: 'effect'
                        },{
                            field: 'isVerified',
                            title: 'isVerified',
                            align: 'center',
                            events: window.operateEvents,
                            formatter: operateFormatter
                        }],
                        data: data,
                        onDblClickRow: function (row, $element, field) {
                            var modal = $("#verify");
                            modal.modal();
                            modal.find('.modal-body label').innerText = row.class;
                        }
                    });
                },"json");

            return true;
        }

        function showProjectDir(pid,pname){
            $.get("/trace/getProjectDir?pid="+encodeURIComponent(pid)+"&pname="+encodeURIComponent(pname),
            function (data) {
                $("#tree").treeview({
                    data: [data]
                });
            },"json");

        }

        function showUc(){//todo
            $.get("/trace/uc",
            function(data){
                $("p#box").css("white-space","pre-wrap");
                $("p#box").text(data);
            });
        }

        showUc();
        showProjectDir(6,"movies-java-spring-data-neo4j-master");
        showCandidateList(6);
    })
</script>

</html>
